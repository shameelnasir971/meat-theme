{%- style -%}
  .features-bar-{{ section.id }} {
    background-color: {{ section.settings.background_color }};
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    width: 100%;
  }
  
  .fb-container-{{ section.id }} {
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  .fb-flex {
    display: flex;
    justify-content: space-around;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 40px;
  }
  
  /* ITEM CONTAINER: STACKED VERTICALLY */
  .fb-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    text-align: center;
    flex: 1;
    min-width: 250px;
  }
  
  /* ICON STYLING */
  .fb-icon {
    margin-bottom: 15px;
    width: {{ section.settings.icon_size }}px;
    height: {{ section.settings.icon_size }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: {{ section.settings.icon_color }};
    line-height: 1;
  }

  .fb-icon i {
    font-size: {{ section.settings.icon_size }}px;
    display: block;
  }

  .fb-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
  
  /* TEXT STYLING */
  .fb-info {
    width: 100%;
  }
  
  .fb-info h4 {
    margin: 0 0 8px 0;
    font-size: {{ section.settings.heading_size }}px;
    font-weight: 700;
    color: {{ section.settings.heading_color }};
    line-height: 1.2;
    text-transform: capitalize;
    font-family: 'Oswald', sans-serif;
  }
  
  .fb-info p {
    margin: 0;
    font-size: {{ section.settings.text_size }}px;
    color: {{ section.settings.text_color }};
    line-height: 1.5;
    font-weight: 400;
    opacity: 0.8;
  }

  /* MOBILE RESPONSIVE */
  @media (max-width: 768px) {
    .fb-flex {
      flex-direction: column;
      gap: 40px;
    }
    .fb-item {
      width: 100%;
      max-width: 300px;
      margin: 0 auto;
    }
  }
{%- endstyle -%}

<!-- FontAwesome link for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
<link href="https://fonts.googleapis.com/css2?family=Oswald:wght@600;700&display=swap" rel="stylesheet">

<section class="features-bar-{{ section.id }}">
  <div class="fb-container-{{ section.id }}">
    <div class="fb-flex">
      
      {%- if section.blocks.size > 0 -%}
        {%- for block in section.blocks -%}
          <div class="fb-item" {{ block.shopify_attributes }}>
            <div class="fb-icon">
              {%- if block.settings.custom_image != blank -%}
                <img src="{{ block.settings.custom_image | img_url: '100x' }}" alt="{{ block.settings.title }}" width="50" height="50" loading="lazy">
              {%- else -%}
                <i class="{{ block.settings.icon_class }}"></i>
              {%- endif -%}
            </div>
            <div class="fb-info">
              <h4>{{ block.settings.title }}</h4>
              <p>{{ block.settings.subtext }}</p>
            </div>
          </div>
        {%- endfor -%}
      {%- else -%}
        {%- comment -%} Default Content Matches Screenshot {%- endcomment -%}
        <div class="fb-item">
          <div class="fb-icon"><i class="fa-regular fa-certificate"></i></div>
          <div class="fb-info"><h4>100% Halal Certified</h4><p>Verified by UAE authorities</p></div>
        </div>
        <div class="fb-item">
          <div class="fb-icon"><i class="fa-solid fa-leaf"></i></div>
          <div class="fb-info"><h4>Always Fresh</h4><p>Cut and delivered same day</p></div>
        </div>
        <div class="fb-item">
          <div class="fb-icon"><i class="fa-solid fa-truck-fast"></i></div>
          <div class="fb-info"><h4>Free UAE Delivery</h4><p>On orders above $150</p></div>
        </div>
      {%- endif -%}

    </div>
  </div>
</section>

{% schema %}
{
  "name": "Icon Features Bar",
  "settings": [
    {
      "type": "header",
      "content": "üé® Appearance"
    },
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#FFF0F0" },
    { "type": "color", "id": "icon_color", "label": "Icon Color", "default": "#C62828" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#1a1a1a" },
    { "type": "color", "id": "text_color", "label": "Subtext Color", "default": "#555555" },
    {
      "type": "header",
      "content": "üìê Layout"
    },
    { "type": "range", "id": "container_width", "label": "Max Container Width", "min": 1000, "max": 1600, "step": 50, "default": 1200 },
    { "type": "range", "id": "padding_top", "label": "Padding Top", "min": 10, "max": 100, "step": 5, "default": 50 },
    { "type": "range", "id": "padding_bottom", "label": "Padding Bottom", "min": 10, "max": 100, "step": 5, "default": 50 },
    {
      "type": "header",
      "content": "üî§ Sizes"
    },
    { 
      "type": "range", 
      "id": "icon_size", 
      "label": "Icon Size", 
      "min": 20, 
      "max": 80, 
      "step": 5, 
      "default": 45 
    },
    { "type": "range", "id": "heading_size", "label": "Heading Font Size", "min": 14, "max": 30, "step": 1, "default": 20 },
    { "type": "range", "id": "text_size", "label": "Subtext Font Size", "min": 12, "max": 20, "step": 1, "default": 14 }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Item",
      "settings": [
        { "type": "text", "id": "icon_class", "label": "Icon Class (Font Awesome)", "default": "fa-regular fa-check-circle", "info": "e.g. fa-solid fa-truck" },
        { "type": "image_picker", "id": "custom_image", "label": "Custom Image Icon (Optional)" },
        { "type": "text", "id": "title", "label": "Heading", "default": "Feature Title" },
        { "type": "text", "id": "subtext", "label": "Description", "default": "Add a short description" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icon Features Bar",
      "blocks": [
        { "type": "feature", "settings": { "icon_class": "fa-regular fa-certificate", "title": "100% Halal Certified", "subtext": "Verified by UAE authorities" } },
        { "type": "feature", "settings": { "icon_class": "fa-solid fa-leaf", "title": "Always Fresh", "subtext": "Cut and delivered same day" } },
        { "type": "feature", "settings": { "icon_class": "fa-solid fa-truck-fast", "title": "Free UAE Delivery", "subtext": "On orders above $150" } }
      ]
    }
  ]
}
{% endschema %}