{%- style -%}
  .features-bar-{{ section.id }} {
    background-color: {{ section.settings.background_color }};
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    width: 100%;
  }
  
  .fb-container-{{ section.id }} {
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  .fb-flex {
    display: flex;
    justify-content: space-around;
    align-items: center;
    flex-wrap: wrap;
    gap: 30px;
  }
  
  .fb-item {
    display: flex;
    align-items: center;
    gap: 15px;
    flex: 1;
    min-width: 280px;
    justify-content: center;
  }
  
  .fb-icon {
    flex-shrink: 0;
    width: {{ section.settings.icon_size }}px;
    display: flex;
    align-items: center;
    justify-content: center;
    color: {{ section.settings.icon_color }};
  }

  .fb-icon i {
    font-size: {{ section.settings.icon_size }}px;
    line-height: 1;
  }

  .fb-icon img {
    width: 100%;
    height: auto;
    object-fit: contain;
  }
  
  .fb-info {
    text-align: left;
  }
  
  .fb-info h4 {
    margin: 0;
    font-size: {{ section.settings.heading_size }}px;
    font-weight: 700;
    color: {{ section.settings.heading_color }};
    line-height: 1.2;
  }
  
  .fb-info p {
    margin: 4px 0 0 0;
    font-size: {{ section.settings.text_size }}px;
    color: {{ section.settings.text_color }};
    line-height: 1.4;
    font-weight: 400;
  }

  @media (max-width: 768px) {
    .fb-flex {
      flex-direction: column;
      gap: 25px;
    }
    .fb-item {
      justify-content: flex-start;
      width: 100%;
      max-width: 350px;
      margin: 0 auto;
    }
  }
{%- endstyle -%}

<!-- FontAwesome link for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<section class="features-bar-{{ section.id }}">
  <div class="fb-container-{{ section.id }}">
    <div class="fb-flex">
      
      {%- if section.blocks.size > 0 -%}
        {%- for block in section.blocks -%}
          <div class="fb-item" {{ block.shopify_attributes }}>
            <div class="fb-icon">
              {%- if block.settings.custom_image != blank -%}
                <img src="{{ block.settings.custom_image | img_url: '100x' }}" alt="{{ block.settings.title }}" width="45" height="45" loading="lazy">
              {%- else -%}
                <i class="{{ block.settings.icon_class }}"></i>
              {%- endif -%}
            </div>
            <div class="fb-info">
              <h4>{{ block.settings.title }}</h4>
              <p>{{ block.settings.subtext }}</p>
            </div>
          </div>
        {%- endfor -%}
      {%- else -%}
        {%- comment -%} Onboarding Content (Screenshot look) {%- endcomment -%}
        <div class="fb-item">
          <div class="fb-icon"><i class="fas fa-certificate"></i></div>
          <div class="fb-info"><h4>100% Halal Certified</h4><p>Verified by UAE authorities</p></div>
        </div>
        <div class="fb-item">
          <div class="fb-icon"><i class="fas fa-leaf"></i></div>
          <div class="fb-info"><h4>Always Fresh</h4><p>Cut and delivered same day</p></div>
        </div>
        <div class="fb-item">
          <div class="fb-icon"><i class="fas fa-truck-fast"></i></div>
          <div class="fb-info"><h4>Free UAE Delivery</h4><p>On orders above $150</p></div>
        </div>
      {%- endif -%}

    </div>
  </div>
</section>

{% schema %}
{
  "name": "Icon Features Bar",
  "settings": [
    {
      "type": "header",
      "content": "üé® Appearance"
    },
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#fdf0f0" },
    { "type": "color", "id": "icon_color", "label": "Icon Color", "default": "#d32f2f" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#1a1a1a" },
    { "type": "color", "id": "text_color", "label": "Subtext Color", "default": "#666666" },
    {
      "type": "header",
      "content": "üìê Layout"
    },
    { "type": "range", "id": "container_width", "label": "Max Container Width", "min": 1000, "max": 1600, "step": 50, "default": 1200 },
    { "type": "range", "id": "padding_top", "label": "Padding Top", "min": 10, "max": 100, "step": 5, "default": 40 },
    { "type": "range", "id": "padding_bottom", "label": "Padding Bottom", "min": 10, "max": 100, "step": 5, "default": 40 },
    {
      "type": "header",
      "content": "üî§ Sizes"
    },
    { "type": "range", "id": "icon_size", "label": "Icon Size", "min": 20, "max": 60, "step": 1, "default": 45 },
    { "type": "range", "id": "heading_size", "label": "Heading Font Size", "min": 14, "max": 30, "step": 1, "default": 18 },
    { "type": "range", "id": "text_size", "label": "Subtext Font Size", "min": 12, "max": 20, "step": 1, "default": 14 }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Item",
      "settings": [
        { "type": "text", "id": "icon_class", "label": "Icon Class (Font Awesome)", "default": "fas fa-check-circle", "info": "Browse icons at fontawesome.com" },
        { "type": "image_picker", "id": "custom_image", "label": "Custom Image Icon (Optional)" },
        { "type": "text", "id": "title", "label": "Heading", "default": "Feature Title" },
        { "type": "text", "id": "subtext", "label": "Description", "default": "Add a short description" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icon Features Bar",
      "blocks": [
        { "type": "feature", "settings": { "icon_class": "fas fa-certificate", "title": "100% Halal Certified", "subtext": "Verified by UAE authorities" } },
        { "type": "feature", "settings": { "icon_class": "fas fa-leaf", "title": "Always Fresh", "subtext": "Cut and delivered same day" } },
        { "type": "feature", "settings": { "icon_class": "fas fa-truck-fast", "title": "Free UAE Delivery", "subtext": "On orders above $150" } }
      ]
    }
  ]
}
{% endschema %}