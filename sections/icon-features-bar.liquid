{%- style -%}
  /* Import Requested Fonts */
  @import url('https://fonts.googleapis.com/css2?family=Questrial&family=Oswald:wght@400;500;600;700&family=Poppins:wght@300;400;500;600&display=swap');

  .features-bar-{{ section.id }} {
    /* --- Dynamic Variables --- */
    --bg-color: {{ section.settings.background_color }};
    --icon-color: {{ section.settings.icon_color }};
    --heading-color: {{ section.settings.heading_color }};
    --text-color: {{ section.settings.text_color }};
    
    --h-font: {{ section.settings.heading_font_family }};
    --b-font: {{ section.settings.body_font_family }};
    
    --icon-size: {{ section.settings.icon_size }}px;
    --h-size: {{ section.settings.heading_size }}px;
    --h-size-mob: {{ section.settings.heading_size_mob }}px;
    --t-size: {{ section.settings.text_size }}px;
    --t-size-mob: {{ section.settings.text_size_mob }}px;

    background-color: var(--bg-color);
    padding: {{ section.settings.padding_top }}px 0 {{ section.settings.padding_bottom }}px;
    width: 100%;
    font-family: var(--b-font);
  }
  
  .fb-container-{{ section.id }} {
    max-width: {{ section.settings.container_width }}px;
    margin: 0 auto;
    padding: 0 20px;
  }
  
  .fb-flex {
    display: flex;
    justify-content: space-around;
    align-items: flex-start;
    flex-wrap: wrap;
    gap: 40px;
  }
  
  /* ITEM CONTAINER */
  .fb-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: flex-start;
    text-align: center;
    flex: 1;
    min-width: 250px;
    transition: transform 0.3s cubic-bezier(0.25, 0.46, 0.45, 0.94);
    
    /* Animation Stagger */
    {% if section.settings.animation_type == 'fade-up' %}
      animation: fadeInUp 1s ease-out forwards;
      opacity: 0;
    {% elsif section.settings.animation_type == 'zoom-in' %}
      animation: zoomIn 0.8s ease-out forwards;
      opacity: 0;
    {% endif %}
  }

  /* Stagger Delays */
  .fb-item:nth-child(1) { animation-delay: 0.1s; }
  .fb-item:nth-child(2) { animation-delay: 0.2s; }
  .fb-item:nth-child(3) { animation-delay: 0.3s; }
  .fb-item:nth-child(4) { animation-delay: 0.4s; }
  
  /* Hover Effect */
  {% if section.settings.enable_hover %}
  .fb-item:hover {
    transform: translateY(-8px);
  }
  .fb-item:hover .fb-icon {
    transform: scale(1.1);
  }
  {% endif %}
  
  /* ICON STYLING */
  .fb-icon {
    margin-bottom: 15px;
    width: var(--icon-size);
    height: var(--icon-size);
    display: flex;
    align-items: center;
    justify-content: center;
    color: var(--icon-color);
    line-height: 1;
    transition: transform 0.3s ease;
  }

  .fb-icon i {
    font-size: var(--icon-size);
    display: block;
  }

  .fb-icon img {
    width: 100%;
    height: 100%;
    object-fit: contain;
  }
  
  /* TEXT STYLING */
  .fb-info {
    width: 100%;
  }
  
  .fb-info h4 {
    margin: 0 0 8px 0;
    font-size: var(--h-size);
    font-family: var(--h-font);
    font-weight: 700;
    color: var(--heading-color);
    line-height: 1.2;
    text-transform: capitalize;
  }
  
  .fb-info p {
    margin: 0;
    font-size: var(--t-size);
    color: var(--text-color);
    line-height: 1.5;
    font-weight: 400;
    opacity: 0.8;
  }

  /* Keyframes */
  @keyframes fadeInUp { from { opacity: 0; transform: translateY(30px); } to { opacity: 1; transform: translateY(0); } }
  @keyframes zoomIn { from { opacity: 0; transform: scale(0.8); } to { opacity: 1; transform: scale(1); } }

  /* MOBILE RESPONSIVE */
  @media (max-width: 768px) {
    .fb-flex {
      flex-direction: column;
      gap: 40px;
    }
    .fb-item {
      width: 100%;
      max-width: 300px;
      margin: 0 auto;
    }
    
    .fb-info h4 { font-size: var(--h-size-mob); }
    .fb-info p { font-size: var(--t-size-mob); }
  }
{%- endstyle -%}

<!-- FontAwesome link for icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

<section class="features-bar-{{ section.id }}">
  <div class="fb-container-{{ section.id }}">
    <div class="fb-flex">
      
      {%- if section.blocks.size > 0 -%}
        {%- for block in section.blocks -%}
          <div class="fb-item" {{ block.shopify_attributes }}>
            <div class="fb-icon">
              {%- if block.settings.custom_image != blank -%}
                <img src="{{ block.settings.custom_image | image_url: width: 200 }}" alt="{{ block.settings.title }}" loading="lazy">
              {%- else -%}
                <i class="{{ block.settings.icon_class }}"></i>
              {%- endif -%}
            </div>
            <div class="fb-info">
              <h4>{{ block.settings.title }}</h4>
              <p>{{ block.settings.subtext }}</p>
            </div>
          </div>
        {%- endfor -%}
      {%- else -%}
        {%- comment -%} Default Content {%- endcomment -%}
        <div class="fb-item">
          <div class="fb-icon"><i class="fa-regular fa-certificate"></i></div>
          <div class="fb-info"><h4>100% Halal Certified</h4><p>Verified by UAE authorities</p></div>
        </div>
        <div class="fb-item">
          <div class="fb-icon"><i class="fa-solid fa-leaf"></i></div>
          <div class="fb-info"><h4>Always Fresh</h4><p>Cut and delivered same day</p></div>
        </div>
        <div class="fb-item">
          <div class="fb-icon"><i class="fa-solid fa-truck-fast"></i></div>
          <div class="fb-info"><h4>Free UAE Delivery</h4><p>On orders above $150</p></div>
        </div>
      {%- endif -%}

    </div>
  </div>
</section>

{% schema %}
{
  "name": "Icon Features Bar Pro",
  "settings": [
    {
      "type": "header",
      "content": "Typography Settings"
    },
    { "type": "select", "id": "heading_font_family", "label": "Heading Font", "options": [
      { "value": "'Oswald', sans-serif", "label": "Oswald (Bold)" },
      { "value": "'Questrial', sans-serif", "label": "Questrial (Clean)" },
      { "value": "'Poppins', sans-serif", "label": "Poppins (Modern)" },
      { "value": "serif", "label": "System Serif" }
    ], "default": "'Oswald', sans-serif" },
    { "type": "range", "id": "heading_size", "label": "Heading Size (Desktop)", "min": 14, "max": 40, "step": 1, "default": 20, "unit": "px" },
    { "type": "range", "id": "heading_size_mob", "label": "Heading Size (Mobile)", "min": 14, "max": 30, "step": 1, "default": 18, "unit": "px" },
    
    { "type": "select", "id": "body_font_family", "label": "Body Font", "options": [
      { "value": "'Poppins', sans-serif", "label": "Poppins" },
      { "value": "'Questrial', sans-serif", "label": "Questrial" },
      { "value": "sans-serif", "label": "System Sans" }
    ], "default": "'Poppins', sans-serif" },
    { "type": "range", "id": "text_size", "label": "Subtext Size (Desktop)", "min": 12, "max": 24, "step": 1, "default": 14, "unit": "px" },
    { "type": "range", "id": "text_size_mob", "label": "Subtext Size (Mobile)", "min": 12, "max": 20, "step": 1, "default": 14, "unit": "px" },

    {
      "type": "header",
      "content": "ðŸŽ¨ Colors"
    },
    { "type": "color", "id": "background_color", "label": "Background Color", "default": "#FFF0F0" },
    { "type": "color", "id": "icon_color", "label": "Icon Color", "default": "#C62828" },
    { "type": "color", "id": "heading_color", "label": "Heading Color", "default": "#1a1a1a" },
    { "type": "color", "id": "text_color", "label": "Subtext Color", "default": "#555555" },
    
    {
      "type": "header",
      "content": "Animations & Layout"
    },
    { "type": "select", "id": "animation_type", "label": "Entrance Animation", "options": [
      { "value": "none", "label": "None" },
      { "value": "fade-up", "label": "Fade Up" },
      { "value": "zoom-in", "label": "Zoom In" }
    ], "default": "fade-up" },
    { "type": "checkbox", "id": "enable_hover", "label": "Enable Hover Effect", "default": true },
    
    { "type": "range", "id": "icon_size", "label": "Icon Size", "min": 20, "max": 100, "step": 5, "default": 45, "unit": "px" },
    { "type": "range", "id": "container_width", "label": "Max Container Width", "min": 1000, "max": 1600, "step": 50, "default": 1200, "unit": "px" },
    { "type": "range", "id": "padding_top", "label": "Padding Top", "min": 10, "max": 100, "step": 5, "default": 50, "unit": "px" },
    { "type": "range", "id": "padding_bottom", "label": "Padding Bottom", "min": 10, "max": 100, "step": 5, "default": 50, "unit": "px" }
  ],
  "blocks": [
    {
      "type": "feature",
      "name": "Feature Item",
      "settings": [
        { "type": "text", "id": "icon_class", "label": "Icon Class (Font Awesome)", "default": "fa-regular fa-check-circle", "info": "Leave blank if using image" },
        { "type": "image_picker", "id": "custom_image", "label": "Custom Icon Image (Upload)", "info": "Overrides the icon class" },
        { "type": "text", "id": "title", "label": "Heading", "default": "Feature Title" },
        { "type": "text", "id": "subtext", "label": "Description", "default": "Add a short description" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Icon Features Bar Pro",
      "blocks": [
        { "type": "feature", "settings": { "icon_class": "fa-regular fa-certificate", "title": "100% Halal Certified", "subtext": "Verified by UAE authorities" } },
        { "type": "feature", "settings": { "icon_class": "fa-solid fa-leaf", "title": "Always Fresh", "subtext": "Cut and delivered same day" } },
        { "type": "feature", "settings": { "icon_class": "fa-solid fa-truck-fast", "title": "Free UAE Delivery", "subtext": "On orders above $150" } }
      ]
    }
  ]
}
{% endschema %}