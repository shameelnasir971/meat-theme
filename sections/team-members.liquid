{%- style -%}
/* Import Advanced Fonts */
@import url('https://fonts.googleapis.com/css2?family=Questrial&family=Oswald:wght@400;700&family=Poppins:wght@300;400;600&family=Montserrat:wght@300;400;700&family=Roboto:wght@300;400;700&family=Playfair+Display:ital,wght@0,400;1,700&display=swap');

.section-{{ section.id }} {
  --bg-color: {{ section.settings.bg_color }};
  --primary-acc: {{ section.settings.accent_color }};
  --primary-hov: {{ section.settings.accent_hover_color }};
  --h-color: {{ section.settings.text_color_heading }};
  --sub-color: {{ section.settings.text_color_sub }};
  --card-bg: {{ section.settings.card_bg }};
  
  --h-font: {{ section.settings.heading_font_family }};
  --b-font: {{ section.settings.body_font_family }};
  
  --h-size: {{ section.settings.h_size }}px;
  --h-size-mob: {{ section.settings.h_size_mob }}px;
  --name-size: {{ section.settings.name_size }}px;
  --role-size: {{ section.settings.role_size }}px;

  padding-top: {{ section.settings.p_top }}px;
  padding-bottom: {{ section.settings.p_bottom }}px;
  background-color: var(--bg-color);
  font-family: var(--b-font);
  overflow: hidden;
}

.container-team {
  max-width: {{ section.settings.container_width }}px;
  margin: 0 auto;
  padding: 0 20px;
}

.team-header { 
  text-align: center; 
  margin-bottom: 50px;
  {% if section.settings.animation_type != 'none' %}
    animation: {{ section.settings.animation_type }} 1s ease-out forwards;
    opacity: 0;
  {% endif %}
}

.team-title {
  font-family: var(--h-font);
  font-size: var(--h-size);
  color: var(--h-color);
  margin-bottom: 15px;
  text-transform: uppercase;
  font-weight: 700;
  letter-spacing: 1px;
}

.team-subtitle {
  font-size: 16px;
  color: var(--sub-color);
  max-width: 650px;
  margin: 0 auto;
  line-height: 1.6;
}

.team-slider-container { overflow: hidden; position: relative; padding: 10px 0; }

.team-track {
  display: flex;
  transition: transform 0.8s cubic-bezier(0.23, 1, 0.32, 1);
}

.team-card {
  flex: 0 0 calc(100% / {{ section.settings.cols_desktop }});
  padding: 0 12px;
  box-sizing: border-box;
}

.member-inner {
  background: var(--card-bg);
  border-radius: {{ section.settings.card_radius }}px;
  overflow: hidden;
  transition: 0.4s ease;
  position: relative;
  text-align: center;
  box-shadow: 0 10px 30px rgba(0,0,0,0.05);
}

/* Hover Effects */
{% if section.settings.hover_effect == 'lift' %}
.member-inner:hover { transform: translateY(-12px); box-shadow: 0 15px 40px rgba(0,0,0,0.12); }
{% endif %}

.member-img {
  width: 100%;
  height: {{ section.settings.img_height }}px;
  position: relative;
  overflow: hidden;
  background: #f0f0f0;
}

.member-img img {
  width: 100%; height: 100%; object-fit: cover; transition: 0.6s ease;
  {% if section.settings.hover_effect == 'grayscale' %} filter: grayscale(100%); {% endif %}
}

.member-inner:hover .member-img img {
  {% if section.settings.enable_zoom %} transform: scale(1.1); {% endif %}
  {% if section.settings.hover_effect == 'grayscale' %} filter: grayscale(0%); {% endif %}
}

/* Social Overlay */
.social-overlay {
  position: absolute; inset: 0;
  background: rgba(0,0,0,0.4);
  display: flex; align-items: center; justify-content: center;
  gap: 12px; opacity: 0; transition: 0.3s;
}
.member-inner:hover .social-overlay { opacity: 1; }

.social-icon {
  width: 38px; height: 38px; background: #fff; border-radius: 50%;
  display: flex; align-items: center; justify-content: center;
  color: var(--primary-acc); text-decoration: none; transition: 0.3s;
  font-size: 16px;
}
.social-icon:hover { background: var(--primary-acc); color: #fff; transform: translateY(-3px); }

.member-info { padding: 25px 15px; }
.m-name { 
  font-family: var(--h-font); font-size: var(--name-size); 
  color: var(--h-color); margin: 0 0 5px; font-weight: 700; 
}
.m-role { 
  font-size: var(--role-size); color: var(--primary-acc); 
  text-transform: uppercase; font-weight: 600; letter-spacing: 1px;
}

/* Controls */
.team-controls { display: flex; align-items: center; justify-content: center; gap: 25px; margin-top: 40px; }
.nav-btn {
  width: 50px; height: 50px; border-radius: 50%; border: 2px solid var(--primary-acc);
  background: transparent; color: var(--primary-acc); cursor: pointer; transition: 0.3s;
  display: flex; align-items: center; justify-content: center; padding: 0;
}
.nav-btn:hover { background: var(--primary-acc); color: #fff; }
.nav-btn img { width: 22px; height: 22px; object-fit: contain; }

.t-dot { width: 10px; height: 10px; background: #ddd; border-radius: 50%; cursor: pointer; transition: 0.4s; }
.t-dot.active { background: var(--primary-acc); width: 28px; border-radius: 5px; }

@keyframes fade-up { from { opacity: 0; transform: translateY(40px); } to { opacity: 1; transform: translateY(0); } }
@keyframes zoom-in { from { opacity: 0; transform: scale(0.85); } to { opacity: 1; transform: scale(1); } }

@media (max-width: 1024px) {
  .team-card { flex: 0 0 50%; }
  .team-title { font-size: var(--h-size-mob); }
}
@media (max-width: 768px) {
  .team-card { flex: 0 0 100%; }
  .member-img { height: {{ section.settings.img_height_mob }}px; }
  .section-{{ section.id }} { padding: 50px 0; }
}
{%- endstyle -%}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">

<section class="section-{{ section.id }}">
  <div class="container-team">
    <div class="team-header">
      <h2 class="team-title">{{ section.settings.heading }}</h2>
      <div class="team-subtitle">{{ section.settings.subheading }}</div>
    </div>

    <div class="team-slider-container">
      <div class="team-track" id="track-{{ section.id }}">
        {% for block in section.blocks %}
          <div class="team-card" {{ block.shopify_attributes }}>
            <div class="member-inner">
              <div class="member-img">
                {% if block.settings.image != blank %}
                  <img src="{{ block.settings.image | image_url: width: 800 }}" alt="{{ block.settings.name }}" loading="lazy">
                {% else %}
                  {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                {% endif %}
                
                <div class="social-overlay">
                  {% if block.settings.li_link != blank %}<a href="{{ block.settings.li_link }}" class="social-icon"><i class="fab fa-linkedin-in"></i></a>{% endif %}
                  {% if block.settings.ig_link != blank %}<a href="{{ block.settings.ig_link }}" class="social-icon"><i class="fab fa-instagram"></i></a>{% endif %}
                  {% if block.settings.tw_link != blank %}<a href="{{ block.settings.tw_link }}" class="social-icon"><i class="fab fa-twitter"></i></a>{% endif %}
                </div>
              </div>
              <div class="member-info">
                <h3 class="m-name">{{ block.settings.name }}</h3>
                <span class="m-role">{{ block.settings.role }}</span>
              </div>
            </div>
          </div>
        {% endfor %}
      </div>
    </div>

    <div class="team-controls">
      {% if section.settings.show_nav %}
        <button class="nav-btn" onclick="slider{{ section.id | replace: '-', '' }}.move(-1)">
          {% if section.settings.custom_left != blank %}<img src="{{ section.settings.custom_left | image_url: width: 44 }}">{% else %}<i class="fas fa-chevron-left"></i>{% endif %}
        </button>
      {% endif %}
      
      <div id="dots-{{ section.id }}" style="display:flex; gap:10px;"></div>
      
      {% if section.settings.show_nav %}
        <button class="nav-btn" onclick="slider{{ section.id | replace: '-', '' }}.move(1)">
          {% if section.settings.custom_right != blank %}<img src="{{ section.settings.custom_right | image_url: width: 44 }}">{% else %}<i class="fas fa-chevron-right"></i>{% endif %}
        </button>
      {% endif %}
    </div>
  </div>
</section>

<script>
class TeamSlider{{ section.id | replace: '-', '' }} {
  constructor() {
    this.track = document.getElementById('track-{{ section.id }}');
    this.dotsBox = document.getElementById('dots-{{ section.id }}');
    this.index = 0;
    this.init();
    if({{ section.settings.autoplay }}) setInterval(() => this.move(1), {{ section.settings.autoplay_speed }} * 1000);
  }
  getVisible() {
    if (window.innerWidth <= 768) return 1;
    if (window.innerWidth <= 1024) return 2;
    return {{ section.settings.cols_desktop }};
  }
  init() {
    this.renderDots();
    window.addEventListener('resize', () => { this.index = 0; this.renderDots(); this.update(); });
  }
  renderDots() {
    const cards = this.track.querySelectorAll('.team-card');
    const count = Math.max(0, cards.length - this.getVisible() + 1);
    this.dotsBox.innerHTML = '';
    for(let i=0; i<count; i++) {
      const d = document.createElement('div');
      d.className = 't-dot' + (i==this.index ? ' active' : '');
      d.onclick = () => { this.index = i; this.update(); };
      this.dotsBox.appendChild(d);
    }
  }
  move(dir) {
    const cards = this.track.querySelectorAll('.team-card');
    const max = cards.length - this.getVisible();
    this.index += dir;
    if(this.index > max) this.index = 0;
    if(this.index < 0) this.index = max;
    this.update();
  }
  update() {
    const w = this.track.querySelector('.team-card').offsetWidth;
    this.track.style.transform = `translateX(-${this.index * w}px)`;
    const dots = this.dotsBox.querySelectorAll('.t-dot');
    dots.forEach((d, i) => d.classList.toggle('active', i == this.index));
  }
}
const slider{{ section.id | replace: '-', '' }} = new TeamSlider{{ section.id | replace: '-', '' }}();
</script>

{% schema %}
{
"name": "Meet Our Team Pro",
"settings": [
  { "type": "header", "content": "Section Header" },
  { "type": "text", "id": "heading", "label": "Heading", "default": "Our Professional Team" },
  { "type": "richtext", "id": "subheading", "label": "Sub-heading", "default": "<p>Highly skilled experts dedicated to premium quality.</p>" },
  
  { "type": "header", "content": "Typography (Advanced Fonts)" },
  { "type": "select", "id": "heading_font_family", "label": "Heading Font", "options": [
    { "value": "'Oswald', sans-serif", "label": "Oswald (Bold)" },
    { "value": "'Questrial', sans-serif", "label": "Questrial (Clean)" },
    { "value": "'Playfair Display', serif", "label": "Playfair (Classic)" },
    { "value": "'Montserrat', sans-serif", "label": "Montserrat" }
  ], "default": "'Oswald', sans-serif" },
  { "type": "select", "id": "body_font_family", "label": "Body Font", "options": [
    { "value": "'Poppins', sans-serif", "label": "Poppins" },
    { "value": "'Roboto', sans-serif", "label": "Roboto" },
    { "value": "'Questrial', sans-serif", "label": "Questrial" },
    { "value": "'Montserrat', sans-serif", "label": "Montserrat" }
  ], "default": "'Poppins', sans-serif" },
  { "type": "range", "id": "h_size", "label": "Heading Size", "min": 20, "max": 100, "step": 1, "default": 50 },
  { "type": "range", "id": "h_size_mob", "label": "Heading Size (Mobile)", "min": 18, "max": 50, "step": 1, "default": 32 },
  { "type": "range", "id": "name_size", "label": "Member Name Size", "min": 14, "max": 40, "step": 1, "default": 22 },
  { "type": "range", "id": "role_size", "label": "Role Size", "min": 10, "max": 24, "step": 1, "default": 14 },

  { "type": "header", "content": "Colors" },
  { "type": "color", "id": "bg_color", "label": "Section Background", "default": "#ffffff" },
  { "type": "color", "id": "card_bg", "label": "Card Background", "default": "#ffffff" },
  { "type": "color", "id": "accent_color", "label": "Accent Color", "default": "#d32f2f" },
  { "type": "color", "id": "accent_hover_color", "label": "Accent Hover", "default": "#b71c1c" },
  { "type": "color", "id": "text_color_heading", "label": "Heading Color", "default": "#1a1a1a" },
  { "type": "color", "id": "text_color_sub", "label": "Subtitle Color", "default": "#666666" },

  { "type": "header", "content": "Slider & Layout" },
  { "type": "range", "id": "cols_desktop", "label": "Members Per Row", "min": 2, "max": 4, "step": 1, "default": 3 },
  { "type": "range", "id": "img_height", "label": "Image Height (Desktop)", "min": 200, "max": 600, "step": 5, "default": 450 },
  { "type": "range", "id": "img_height_mob", "label": "Image Height (Mobile)", "min": 200, "max": 500, "step": 5, "default": 350 },
  { "type": "range", "id": "card_radius", "label": "Card Corner Radius", "min": 0, "max": 50, "step": 1, "default": 15 },
  { "type": "checkbox", "id": "autoplay", "label": "Enable Auto-play", "default": true },
  { "type": "range", "id": "autoplay_speed", "label": "Speed (Seconds)", "min": 2, "max": 10, "step": 1, "default": 5 },

  { "type": "header", "content": "Custom Navigation Icons" },
  { "type": "checkbox", "id": "show_nav", "label": "Show Arrow Buttons", "default": true },
  { "type": "image_picker", "id": "custom_left", "label": "Custom Left Arrow" },
  { "type": "image_picker", "id": "custom_right", "label": "Custom Right Arrow" },

  { "type": "header", "content": "Animations & Hover" },
  { "type": "select", "id": "animation_type", "label": "Entrance Animation", "options": [
    { "value": "none", "label": "None" },
    { "value": "fade-up", "label": "Fade Up" },
    { "value": "zoom-in", "label": "Zoom In" }
  ], "default": "fade-up" },
  { "type": "select", "id": "hover_effect", "label": "Hover Style", "options": [
    { "value": "lift", "label": "Card Lift" },
    { "value": "grayscale", "label": "Grayscale to Color" },
    { "value": "none", "label": "None" }
  ], "default": "lift" },
  { "type": "checkbox", "id": "enable_zoom", "label": "Enable Image Zoom on Hover", "default": true },

  { "type": "header", "content": "Spacing" },
  { "type": "range", "id": "container_width", "label": "Container Width", "min": 1000, "max": 1600, "step": 10, "default": 1240 },
  { "type": "range", "id": "p_top", "label": "Padding Top", "min": 0, "max": 150, "step": 2, "default": 80 },
  { "type": "range", "id": "p_bottom", "label": "Padding Bottom", "min": 0, "max": 150, "step": 2, "default": 80 }
],
"blocks": [
  {
    "type": "member",
    "name": "Team Member",
    "settings": [
      { "type": "image_picker", "id": "image", "label": "Member Image" },
      { "type": "text", "id": "name", "label": "Full Name", "default": "Team Member Name" },
      { "type": "text", "id": "role", "label": "Designation", "default": "Meat Specialist" },
      { "type": "url", "id": "li_link", "label": "LinkedIn URL" },
      { "type": "url", "id": "ig_link", "label": "Instagram URL" },
      { "type": "url", "id": "tw_link", "label": "Twitter/X URL" }
    ]
  }
],
"presets": [
  {
    "name": "Meet Our Team Pro",
    "blocks": [ { "type": "member" }, { "type": "member" }, { "type": "member" } ]
  }
]
}
{% endschema %}