{%- style -%}
  @import url('https://fonts.googleapis.com/css2?family=Oswald:wght@500;700&family=Poppins:wght@300;400;600&display=swap');

  :root {
    --accent-color: {{ section.settings.acc_color }};
    --bg-color: {{ section.settings.bg_color }};
    --card-bg: {{ section.settings.img_card_bg }};
    --heading-font: {{ section.settings.heading_font_family }};
    --body-font: {{ section.settings.body_font_family }};
    --text-color: #1a1a1a;
  }

  .ms-product-detail-{{ section.id }} {
    padding: 60px 0;
    background: var(--bg-color);
    font-family: var(--body-font), sans-serif;
  }

  .ms-container {
    max-width: 1300px;
    margin: 0 auto;
    padding: 0 20px;
    display: flex;
    gap: 50px;
    align-items: flex-start;
  }

  /* --- PROFESSIONAL IMAGE GALLERY --- */
  .ms-media-gallery {
    flex: 1.3;
    display: flex;
    gap: 20px;
    position: sticky;
    top: 20px;
  }

  .ms-thumbnails {
    display: flex;
    flex-direction: column;
    gap: 12px;
    width: 90px;
    flex-shrink: 0;
  }

  .ms-thumb-item {
    border-radius: 10px;
    overflow: hidden;
    cursor: pointer;
    border: 2px solid #eee;
    aspect-ratio: 1/1;
    transition: 0.3s cubic-bezier(0.4, 0, 0.2, 1);
    background: #fff;
  }

  .ms-thumb-item:hover { border-color: #ccc; }
  .ms-thumb-item.active { border-color: var(--accent-color); box-shadow: 0 0 10px rgba(0,0,0,0.05); }

  .ms-thumb-item img {
    width: 100%; height: 100%; object-fit: cover;
  }

  /* Main Image Box (Card Style) */
  .ms-main-image-container {
    flex: 1;
    background: var(--card-bg); /* Screenshot jaisa light background */
    border-radius: 20px;
    overflow: hidden;
    position: relative;
    display: flex;
    align-items: center;
    justify-content: center;
    padding: 30px;
    min-height: 550px;
    box-shadow: 0 10px 40px rgba(0,0,0,0.03);
  }

  .ms-main-image-container img {
    width: 100%;
    height: auto;
    object-fit: contain;
    transition: transform 0.6s cubic-bezier(0.165, 0.84, 0.44, 1);
    filter: drop-shadow(0 15px 30px rgba(0,0,0,0.1)); /* Meat ko depth dene ke liye */
  }

  .ms-main-image-container:hover img {
    transform: scale(1.05);
  }

  /* --- PRODUCT INFO --- */
  .ms-info-pane { flex: 1; }

  .ms-p-title {
    font-family: var(--heading-font);
    font-size: {{ section.settings.title_size }}px;
    margin: 0 0 15px;
    text-transform: uppercase;
    color: #111;
    line-height: 1.1;
  }

  .ms-p-short-desc { font-size: 16px; color: #555; line-height: 1.7; margin-bottom: 25px; }

  .ms-p-price-tag {
    color: var(--accent-color);
    font-weight: 700;
    font-size: 26px;
    margin-bottom: 25px;
    display: block;
  }

  /* Checkpoints */
  .ms-checkpoints { margin-bottom: 35px; display: flex; flex-direction: column; gap: 12px; }
  .ms-check-item { display: flex; align-items: center; gap: 12px; font-size: 15px; font-weight: 500; color: #333; }
  .ms-check-item i { color: var(--accent-color); font-size: 18px; }

  /* QTY & BUTTONS */
  .ms-qty-label { font-weight: 700; font-size: 14px; margin-bottom: 10px; display: block; }
  .ms-qty-wrap {
    display: flex; align-items: center; background: #F6F6F6;
    border-radius: 10px; width: fit-content; margin-bottom: 30px; padding: 5px;
  }
  .ms-qty-btn {
    border: none; background: none; width: 45px; height: 45px;
    cursor: pointer; font-size: 20px; color: #1a1a1a; transition: 0.2s;
  }
  .ms-qty-btn:hover { color: var(--accent-color); }
  .ms-qty-input {
    width: 50px; border: none; background: transparent;
    text-align: center; font-weight: 700; font-size: 16px;
  }

  .ms-btn-group { display: flex; flex-direction: column; gap: 15px; margin-bottom: 35px; }
  .ms-btn {
    padding: 18px; border-radius: 10px; font-weight: 700; font-size: 16px;
    text-align: center; cursor: pointer; transition: 0.4s; text-decoration: none; border: none;
    text-transform: uppercase; letter-spacing: 0.5px;
  }
  .ms-add-cart-btn { background: #fdf1f1; color: var(--accent-color); }
  .ms-buy-now-btn { background: var(--accent-color); color: #fff; }
  .ms-btn:hover { transform: translateY(-3px); box-shadow: 0 10px 20px rgba(0,0,0,0.1); opacity: 0.95; }

  /* SOCIAL LINKS */
  .ms-social-actions { display: flex; gap: 30px; padding-bottom: 30px; border-bottom: 1px solid #eee; margin-bottom: 20px; }
  .ms-social-link { display: flex; align-items: center; gap: 8px; cursor: pointer; font-size: 14px; font-weight: 600; color: #444; }
  .ms-social-link:hover { color: var(--accent-color); }

  /* ACCORDION */
  .ms-acc-item { border-bottom: 1px solid #eee; }
  .ms-acc-header {
    width: 100%; padding: 18px 0; display: flex; justify-content: space-between;
    align-items: center; background: none; border: none; cursor: pointer;
    font-weight: 600; font-size: 16px; color: #1a1a1a;
  }
  .ms-acc-content { max-height: 0; overflow: hidden; transition: 0.3s ease; font-size: 14px; color: #666; line-height: 1.6; }
  .ms-acc-item.active .ms-acc-content { max-height: 500px; padding-bottom: 20px; }

  @media (max-width: 990px) {
    .ms-container { flex-direction: column; }
    .ms-media-gallery { flex-direction: column-reverse; position: static; }
    .ms-thumbnails { flex-direction: row; width: 100%; overflow-x: auto; }
    .ms-thumb-item { width: 80px; flex-shrink: 0; }
    .ms-main-image-container { min-height: auto; }
  }
{%- endstyle -%}

<section class="ms-product-detail-{{ section.id }}">
  <div class="ms-container">
    
    <!-- LEFT: Image Card Section -->
    <div class="ms-media-gallery">
      <div class="ms-thumbnails" id="msThumbs-{{ section.id }}">
        {% for image in product.images %}
          <div class="ms-thumb-item {% if forloop.first %}active{% endif %}" onclick="switchImg(this, '{{ image | img_url: '1000x' }}')">
            <img src="{{ image | img_url: '200x200', crop: 'center' }}" alt="{{ product.title }}">
          </div>
        {% endfor %}
      </div>
      
      <div class="ms-main-image-container">
        <img id="MainImg-{{ section.id }}" src="{{ product.featured_image | img_url: '1000x' }}" alt="{{ product.title }}">
      </div>
    </div>

    <!-- RIGHT: Info Pane -->
    <div class="ms-info-pane">
      <h1 class="ms-p-title">{{ product.title }}</h1>
      
      <div class="ms-p-short-desc">
        {{ product.description | strip_html | truncatewords: 35 }}
      </div>

      <span class="ms-p-price-tag">From: {{ product.price | money }}</span>

      <!-- Screenshot style checkmarks -->
      <div class="ms-checkpoints">
        {% if section.settings.check_1 != blank %}
          <div class="ms-check-item"><i class="fa-solid fa-circle-check"></i> {{ section.settings.check_1 }}</div>
        {% endif %}
        {% if section.settings.check_2 != blank %}
          <div class="ms-check-item"><i class="fa-solid fa-circle-check"></i> {{ section.settings.check_2 }}</div>
        {% endif %}
        {% if section.settings.check_3 != blank %}
          <div class="ms-check-item"><i class="fa-solid fa-circle-check"></i> {{ section.settings.check_3 }}</div>
        {% endif %}
        {% if section.settings.check_4 != blank %}
          <div class="ms-check-item"><i class="fa-solid fa-circle-check"></i> {{ section.settings.check_4 }}</div>
        {% endif %}
      </div>

      {% form 'product', product %}
        <input type="hidden" name="id" value="{{ product.selected_or_first_available_variant.id }}">

        {% unless product.has_only_default_variant %}
          <div style="margin-bottom: 25px;">
            <label class="ms-qty-label">{{ product.options.first }}</label>
            <select name="id" class="ms-qty-input" style="width:100%; text-align:left; padding:12px; background:#f9f9f9; border-radius:8px; border:1px solid #eee;">
              {% for variant in product.variants %}
                <option value="{{ variant.id }}">{{ variant.title }}</option>
              {% endfor %}
            </select>
          </div>
        {% endunless %}

        <label class="ms-qty-label">Quantity</label>
        <div class="ms-qty-wrap">
          <button type="button" class="ms-qty-btn" onclick="updateQty(-1)">-</button>
          <input type="number" name="quantity" id="qty-{{ section.id }}" value="1" min="1" class="ms-qty-input">
          <button type="button" class="ms-qty-btn" onclick="updateQty(1)">+</button>
        </div>

        <div class="ms-btn-group">
          <button type="submit" name="add" class="ms-btn ms-add-cart-btn">Add To Cart</button>
          <button type="button" class="ms-btn ms-buy-now-btn" onclick="directBuy()">Buy Now</button>
        </div>
      {% endform %}

      <div class="ms-social-actions">
        <div class="ms-social-link"><i class="fa-solid fa-share-nodes"></i> Share</div>
        <div class="ms-social-link"><i class="fa-regular fa-heart"></i> Wishlist</div>
        <div class="ms-social-link"><i class="fa-brands fa-whatsapp"></i> Whatsapp Chat</div>
      </div>

      <div class="ms-acc-item">
        <button class="ms-acc-header" onclick="toggleAcc(this)">Details <i class="fa-solid fa-plus"></i></button>
        <div class="ms-acc-content">{{ product.description }}</div>
      </div>
      <div class="ms-acc-item">
        <button class="ms-acc-header" onclick="toggleAcc(this)">Our Commitment <i class="fa-solid fa-plus"></i></button>
        <div class="ms-acc-content">{{ section.settings.commit_txt }}</div>
      </div>

    </div>
  </div>
</section>

<script>
  function switchImg(el, src) {
    const main = document.getElementById('MainImg-{{ section.id }}');
    main.style.opacity = '0';
    setTimeout(() => {
      main.src = src;
      main.style.opacity = '1';
    }, 200);
    document.querySelectorAll('.ms-thumb-item').forEach(t => t.classList.remove('active'));
    el.classList.add('active');
  }

  function updateQty(n) {
    const i = document.getElementById('qty-{{ section.id }}');
    let v = parseInt(i.value) + n;
    if(v >= 1) i.value = v;
  }

  function toggleAcc(el) {
    el.parentElement.classList.toggle('active');
    const icon = el.querySelector('i');
    icon.classList.toggle('fa-plus');
    icon.classList.toggle('fa-minus');
  }

  function directBuy() {
    const f = document.querySelector('form[action="/cart/add"]');
    const input = document.createElement('input');
    input.type = 'hidden'; input.name = 'return_to'; input.value = '/checkout';
    f.appendChild(input); f.submit();
  }
</script>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">

{% schema %}
{
  "name": "Meat Shop Product Detail",
  "settings": [
    { "type": "color", "id": "acc_color", "label": "Accent Color (Red)", "default": "#E21E1E" },
    { "type": "color", "id": "bg_color", "label": "Background Color", "default": "#ffffff" },
    { "type": "color", "id": "img_card_bg", "label": "Image Card Background", "default": "#F7DBDB" },
    { "type": "select", "id": "heading_font_family", "label": "Heading Font", "options": [
        { "value": "'Oswald'", "label": "Oswald" }, { "value": "'Poppins'", "label": "Poppins" }
      ], "default": "'Oswald'" },
    { "type": "select", "id": "body_font_family", "label": "Body Font", "options": [
        { "value": "'Poppins'", "label": "Poppins" }, { "value": "sans-serif", "label": "System" }
      ], "default": "'Poppins'" },
    { "type": "range", "id": "title_size", "label": "Title Font Size", "min": 24, "max": 60, "default": 45 },
    { "type": "header", "content": "Checkpoints" },
    { "type": "text", "id": "check_1", "label": "Point 1", "default": "100% Halal Certified" },
    { "type": "text", "id": "check_2", "label": "Point 2", "default": "Fresh, Never Frozen" },
    { "type": "text", "id": "check_3", "label": "Point 3", "default": "Hygienically Prepared" },
    { "type": "text", "id": "check_4", "label": "Point 4", "default": "Boneless Premium Cut" },
    { "type": "textarea", "id": "commit_txt", "label": "Commitment Text", "default": "We are committed to providing you with the freshest meat sourced from local farms." }
  ],
  "presets": [{ "name": "Meat Shop Product Detail" }]
}
{% endschema %}